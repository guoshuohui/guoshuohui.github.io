<!DOCTYPE html><html lang="zh-hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><title>Centos7 中安装 Docker 和 Docker Compose | HiWeb</title><meta name="description" content="本文主要针对免费的社区版（Community Edition，缩写为 CE），而企业版（Enterprise Edition，缩写为 EE）包含了一些收费服务，对于个人开发者来说，社区版足矣！ 环境：  Centos 7.8 Docker 20.10.1 Docker-Compose 1.26.2  英语水平过关的话，可直接阅读官方安装文档： MacWindowsCentOSDebianFedor"><meta property="og:type" content="article"><meta property="og:title" content="Centos7 中安装 Docker 和 Docker Compose"><meta property="og:url" content="https://www.hiweb.cc/articles/installing-docker-in-centos7/index.html"><meta property="og:site_name" content="HiWeb"><meta property="og:description" content="本文主要针对免费的社区版（Community Edition，缩写为 CE），而企业版（Enterprise Edition，缩写为 EE）包含了一些收费服务，对于个人开发者来说，社区版足矣！ 环境：  Centos 7.8 Docker 20.10.1 Docker-Compose 1.26.2  英语水平过关的话，可直接阅读官方安装文档： MacWindowsCentOSDebianFedor"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2020-12-17T06:37:07.000Z"><meta property="article:modified_time" content="2020-12-17T06:37:07.000Z"><meta property="article:author" content="ShuoHui"><meta property="article:tag" content="hiweb,adonisjs,node,javascript,es6,vuejs,vue-cli3,weixin-miniprogram,server,full-stack"><meta name="twitter:card" content="summary"><link rel="icon" href="/favicon.ico"><link rel="alternate" href="/atom.xml" title="HiWeb" type="application/atom+xml"><link rel="stylesheet" href="/css/prism.css"><link rel="stylesheet" href="/css/app.css"></head><body><div class="container typo"><div class="article"><div class="head"><h1>Centos7 中安装 Docker 和 Docker Compose</h1><p><span>作者：ShuoHui</span><span>时间：2020-12-17</span></p></div><div class="content"><p>本文主要针对免费的社区版（Community Edition，缩写为 CE），而企业版（Enterprise Edition，缩写为 EE）包含了一些收费服务，对于个人开发者来说，社区版足矣！</p><p>环境：</p><ul><li>Centos 7.8</li><li>Docker 20.10.1</li><li>Docker-Compose 1.26.2</li></ul><p>英语水平过关的话，可直接阅读官方安装文档：</p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.docker.com/docker-for-mac/install/">Mac</a><br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.docker.com/docker-for-windows/install/">Windows</a><br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.docker.com/install/linux/docker-ce/centos/">CentOS</a><br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.docker.com/install/linux/docker-ce/debian/">Debian</a><br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.docker.com/install/linux/docker-ce/fedora/">Fedora</a><br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.docker.com/install/linux/docker-ce/ubuntu/">Ubuntu</a><br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.docker.com/install/linux/docker-ce/binaries/">其他Linux版本</a></p><h2 id="安装-Docker-CE"><a href="#安装-Docker-CE" class="headerlink" title="安装 Docker CE"></a>安装 Docker CE</h2><p>1、升级 yum 包和内核</p><pre><code class="language-bash">sudo yum update -y</code></pre><p>2、安装必要依赖包</p><pre><code class="language-bash">sudo yum install yum-utils device-mapper-persistent-data lvm2 -y</code></pre><p>3、配置 docker-ce 仓库</p><pre><code class="language-bash">sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</code></pre><p>4、安装 docker-ce</p><pre><code class="language-bash">sudo yum install docker-ce -y</code></pre><p>5、如果你非 root 用户，执行 <code>whoami</code> 获取当前用户名并添加到 docker 组</p><pre><code class="language-bash">sudo usermod -aG docker your-user</code></pre><p>6、验证</p><pre><code class="language-bash">docker -v

# Docker version 20.10.1, build 831ebea</code></pre><p>7、启动 Docker</p><pre><code class="language-bash">sudo systemctl start docker</code></pre><p>8、开机自启动</p><pre><code class="language-bash">sudo systemctl enable docker</code></pre><h2 id="更新-Docker-CE"><a href="#更新-Docker-CE" class="headerlink" title="更新 Docker CE"></a>更新 Docker CE</h2><pre><code class="language-bash">sudo yum update docker-ce</code></pre><h2 id="卸载-Docker-CE"><a href="#卸载-Docker-CE" class="headerlink" title="卸载 Docker CE"></a>卸载 Docker CE</h2><pre><code class="language-bash">sudo yum remove docker-ce</code></pre><blockquote><p>主机上的镜像、容器、卷或者自定义配置文件是不会自动删除的，需要使用以下命令手动删除：</p></blockquote><pre><code class="language-bash">sudo rm -rf /var/lib/docker</code></pre><h2 id="安装-Docker-Compose"><a href="#安装-Docker-Compose" class="headerlink" title="安装 Docker Compose"></a>安装 Docker Compose</h2><p>1、安装 epel 源</p><pre><code class="language-bash">sudo yum install epel-release -y</code></pre><p>2、安装 python-pip</p><pre><code class="language-bash">sudo yum install python-pip -y</code></pre><p>3、升级 python 包</p><pre><code class="language-bash">sudo yum upgrade python*</code></pre><p>4、安装 Docker Compose</p><pre><code class="language-bash">sudo pip install docker-compose</code></pre><blockquote><p>如果提示一下错误，执行 <code>sudo pip install --upgrade pip</code> 升级一下 pip，再重新执行以上命令：<br>Command “python setup.py egg_info” failed with error code 1 in /tmp/pip-build-u5rcFe/bcrypt/<br>You are using pip version 8.1.2, however version 20.3.2 is available.<br>You should consider upgrading via the ‘pip install –upgrade pip’ command.</p></blockquote><p>5、验证</p><pre><code class="language-bash">docker-compose -v

# docker-compose version 1.26.2, build unknown
# 无需理会提示： CryptographyDeprecationWarning: Python 2 is no longer supported by the Python core team</code></pre><blockquote><p>如果执行 docker-compose 命令提示 <code>SyntaxError: invalid syntax</code> 的错误，卸载 pyrsistent 并重新安装 0.16.0 版本：</p></blockquote><pre><code class="language-bash">pip uninstall pyrsistent
pip install pyrsistent0.16.0</code></pre><h2 id="卸载-Docker-Compose"><a href="#卸载-Docker-Compose" class="headerlink" title="卸载 Docker Compose"></a>卸载 Docker Compose</h2><pre><code class="language-bash">sudo pip uninstall docker-compose</code></pre><h2 id="启动、关闭、重启"><a href="#启动、关闭、重启" class="headerlink" title="启动、关闭、重启"></a>启动、关闭、重启</h2><pre><code class="language-bash"># 开启 Docker
sudo systemctl start docker 或 sudo service docker start

# 关闭 Docker
sudo systemctl stop docker 或 sudo service docker stop

# 重启 Docker
sudo systemctl restart docker 或 sudo service docker restart</code></pre><h2 id="卸载老版本-Docker"><a href="#卸载老版本-Docker" class="headerlink" title="卸载老版本 Docker"></a>卸载老版本 Docker</h2><pre><code class="language-bash">sudo yum remove docker \
                docker-client \
                docker-client-latest \
                docker-common \
                docker-latest \
                docker-latest-logrotate \
                docker-logrotate \
                docker-engine</code></pre></div><ul class="copyright"><li><strong>版权声明：</strong> <span>本站所有文章除特别声明外，均为原创，采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">BY-NC-SA </a>许可协议。转载请注明出处！</span></li></ul></div><div class="footer"><span>&copy;&nbsp;2020&nbsp;&nbsp;hiweb</span> 「 <a href="/">Home</a> <em>·</em> <a target="_blank" rel="noopener" href="https://github.com/guoshuohui">GitHub</a>」</div></div><script src="/js/prism.js"></script><script src="/js/app.js"></script></body></html>